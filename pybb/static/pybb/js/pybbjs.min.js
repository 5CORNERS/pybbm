var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var f=a.length,e=0;e<f;e++){var d=a[e];if(b.call(c,d,e,a))return{i:e,v:d}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,f){if(b){c=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var e=a[f];e in c||(c[e]={});c=c[e]}a=a[a.length-1];f=c[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
function pybb_delete_post(a,b,c){if(!confirm(c))return!1;$.ajax({url:a,type:"POST",dataType:"text",success:function(a,c){0<a.length?window.location=a:$("#"+b).slideUp()}})}function pybb_like_post(a,b){return $.ajax({url:a,type:"POST",dataType:"text",success:function(a){$(b).data("count",a);"0"!=a?$(b).find(".counter").text(a):$(b).find(".counter").text("")}})}
$(".like").on("click",function(a){a.preventDefault();$(this).parent().hasClass("animated")||(a=$(this).data("count"),$(this).parent().hasClass("selected")?($(this).hasClass("like")&&(a--,0==a?$(this).find(".counter").text(""):$(this).find(".counter").text(a),$(this).data("count",a),$(this).find(".fa-heart").removeClass("fas").addClass("far"),pybb_like_post(this.href,this)),$(this).parent().addClass("animated bounceIn").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",
function(){$(this).removeClass("selected animated bounceIn")})):($(this).hasClass("like")&&(a++,$(this).find(".counter").text(a),$(this).data("count",a),$(this).find(".fa-heart").removeClass("far").addClass("fas"),pybb_like_post(this.href,this)),$(this).parent().addClass("animated bounceIn selected").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated bounceIn")})))});$(".tooltip-who-liked-text").on("click",function(a){$(this).parent().find(".tooltip-who-liked-container").toggleClass("show-all")});
jQuery(function(a){var b=a("#id_body");if(0<b.length){a(".quote-link").on("click",function(d){d.preventDefault();d=a(this).attr("href");a.get(d,function(a){b.val()&&b.val(b.val()+"\n");b.val(b.val()+a);window.location.hash="#id_body"})});a(".quote-selected-link").on("click",function(d){if(!window.pybb.markup)return!0;d.preventDefault();d=document.selection?document.selection.createRange().text:window.getSelection().toString();if(""!=d){b.val()&&b.val(b.val()+"\n");var c="";1==a(this).closest(".post-row").length&&
1==a(this).closest(".post-row").find(".post-username").length&&(c=a.trim(a(this).closest(".post").find(".post-username").text()));b.val(b.val()+window.pybb.markup.quote(d,c)+"\n\n");window.location.hash="#id_body"}});a(".post-row .post-username").on("click",function(d){window.pybb.markup&&d.shiftKey&&(d.preventDefault(),d=a.trim(a(this).text()),b.val()&&b.val(b.val()+"\n"),b.val(b.val()+window.pybb.markup.username(d)),window.location.hash="#id_body")});var c=a("#id_body").closest("FORM").find(".attachments-form");
if(0<c.length){var f=function(){if(this.value){a(this).unbind("change",f);a(this).closest(".attachment-item").find(".attachment-ref").toggle();var d=parseInt(a("#id_attachments-TOTAL_FORMS").attr("value"));if(d<parseInt(a("#id_attachments-MAX_NUM_FORMS").attr("value"))){var b=c.find(".attachment-list");var e=b.find(".attachment-item").last().clone(!0);e.find("#id_attachments-"+(d-1)+"-id").attr("id","id_attachments-"+d+"-id").attr("name","id_attachments-"+d+"-id");e.find("#id_attachments-"+(d-1)+
"-file").replaceWith('<input id="id_attachments-'+d+'-file" type="file" name="attachments-'+d+'-file" />');e.find(".attachment-ref-value").html("[file-"+(d+1)+"]");b.append(e);e.find(".attachment-ref").toggle();a("#id_attachments-TOTAL_FORMS").attr("value",d+1);current_input_file=a("#id_attachments-"+d+"-file");current_input_file.on("change",f)}}};c.find(".attachment-list .attachment-item INPUT[type=hidden]").attr("value")?(c.find(".attachment-list").show(),c.find(".attachment-link").hide()):(c.find(".attachment-list").hide(),
c.find(".attachment-link").show());c.find(".attachment-ref").each(function(d){a(this).closest(".attachment-item").find("INPUT[type=hidden]").attr("value")?a(this).show():a(this).hide()});c.find(".attachment-ref-insert-link, .attachment-ref-insert-image").show().css("cursor","pointer");c.find(".attachment-link").on("click",function(d){d.preventDefault();c.find(".attachment-link").toggle();a(this).closest(".attachments-form").find(".attachment-list").toggle()});c.find(".attachment-ref-insert-link").on("click",
function(d){d.preventDefault();var b=a(this).closest(".attachment-item");d=b.find(".attachment-ref-value").text();b=b.find("INPUT[type=file]").get(0);var c="";b&&b.files&&b.files[0]?c=b.files[0].name:b&&b.value&&(c=b.value.split("\\"),c=c[c.length-1].split("/"),c=c[c.length-1]);window.pybb.insert_link(d,c)});c.find(".attachment-ref-insert-image").on("click",function(b){b.preventDefault();b=a(this.parentNode).find(".attachment-ref-value").text();window.pybb.insert_image(b)});c.find("INPUT[type=file]").last().on("change",
f)}}var e=a("#pybb_concerned_topics");e.length&&(a('#pybb_subscription_type input[type="radio"]').change(function(a){!this.checked||"2"!=this.value&&"unsubscribe"!=this.value?e.hide():e.show()}),e.hide(),a('input[name="type"][value="2"], input[name="type"][value="unsubscribe"]').each(function(a){this.checked&&e.show()}))});
