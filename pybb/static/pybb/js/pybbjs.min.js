function pybb_delete_post(c,b,a){if(!confirm(a)){return false}$.ajax({url:c,type:"POST",dataType:"text",success:function(d,e){if(d.length>0){window.location=d}else{$("#"+b).slideUp()}}})}function pybb_like_post(a,b){return $.ajax({url:a,type:"POST",dataType:"text",success:function(c){$(b).data("count",c);$(b).find(".counter").text(c)}})}$(".like").on("click",function(a){a.preventDefault();if($(this).parent().hasClass("animated")){return}let likeCounter=$(this).data("count");if($(this).parent().hasClass("selected")){if($(this).hasClass("like")){likeCounter--;$(this).find(".counter").text(likeCounter);$(this).data("count",likeCounter);$(this).find(".menulabel").text("Like");$(this).find(".fa-heart").removeClass("fas").addClass("far");pybb_like_post(this.href,this)}$(this).parent().addClass("animated bounceIn").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("selected animated bounceIn")})}else{if($(this).hasClass("like")){likeCounter++;$(this).find(".counter").text(likeCounter);$(this).data("count",likeCounter);$(this).find(".menulabel").text("Liked");$(this).find(".fa-heart").removeClass("far").addClass("fas");pybb_like_post(this.href,this)}$(this).parent().addClass("animated bounceIn selected").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated bounceIn")})}});jQuery(function(c){function d(){if(document.selection){return document.selection.createRange().text}else{return window.getSelection().toString()}}var a=c("#id_body");if(a.length>0){c(".quote-link").on("click",function(i){i.preventDefault();var h=c(this).attr("href");c.get(h,function(j){if(a.val()){a.val(a.val()+"\n")}a.val(a.val()+j);window.location.hash="#id_body"})});c(".quote-selected-link").on("click",function(h){if(!window.pybb.markup){return true}h.preventDefault();var j=d();if(j!=""){if(a.val()){a.val(a.val()+"\n")}var i="";if(c(this).closest(".post-row").length==1&&c(this).closest(".post-row").find(".post-username").length==1){i=c.trim(c(this).closest(".post").find(".post-username").text())}a.val(a.val()+window.pybb.markup.quote(j,i)+"\n\n");window.location.hash="#id_body"}});c(".post-row .post-username").on("click",function(h){if(window.pybb.markup&&h.shiftKey){h.preventDefault();var i=c.trim(c(this).text());if(a.val()){a.val(a.val()+"\n")}a.val(a.val()+window.pybb.markup.username(i));window.location.hash="#id_body"}});var g=c("#id_body").closest("FORM").find(".attachments-form");if(g.length>0){var e=g.find(".attachment-list .attachment-item INPUT[type=hidden]").attr("value");if(e){g.find(".attachment-list").show();g.find(".attachment-link").hide()}else{g.find(".attachment-list").hide();g.find(".attachment-link").show()}g.find(".attachment-ref").each(function(h){var j=c(this).closest(".attachment-item").find("INPUT[type=hidden]").attr("value");if(j){c(this).show()}else{c(this).hide()}});g.find(".attachment-ref-insert-link, .attachment-ref-insert-image").show().css("cursor","pointer");g.find(".attachment-link").on("click",function(h){h.preventDefault();g.find(".attachment-link").toggle();c(this).closest(".attachments-form").find(".attachment-list").toggle()});g.find(".attachment-ref-insert-link").on("click",function(l){l.preventDefault();var i=c(this).closest(".attachment-item"),k=i.find(".attachment-ref-value").text(),j=i.find("INPUT[type=file]").get(0),h="";if(j&&j.files&&j.files[0]){h=j.files[0].name}else{if(j&&j.value){h=j.value.split("\\");h=h[h.length-1].split("/");h=h[h.length-1]}}window.pybb.insert_link(k,h)});g.find(".attachment-ref-insert-image").on("click",function(i){i.preventDefault();var h=c(this.parentNode).find(".attachment-ref-value").text();window.pybb.insert_image(h)});function b(){if(this.value){c(this).unbind("change",b);c(this).closest(".attachment-item").find(".attachment-ref").toggle();var i=parseInt(c("#id_attachments-TOTAL_FORMS").attr("value")),h,j;if(i<parseInt(c("#id_attachments-MAX_NUM_FORMS").attr("value"))){h=g.find(".attachment-list");j=h.find(".attachment-item").last().clone(true);j.find("#id_attachments-"+(i-1)+"-id").attr("id","id_attachments-"+i+"-id").attr("name","id_attachments-"+i+"-id");j.find("#id_attachments-"+(i-1)+"-file").replaceWith('<input id="id_attachments-'+i+'-file" type="file" name="attachments-'+i+'-file" />');j.find(".attachment-ref-value").html("[file-"+(i+1)+"]");h.append(j);j.find(".attachment-ref").toggle();c("#id_attachments-TOTAL_FORMS").attr("value",i+1);current_input_file=c("#id_attachments-"+i+"-file");current_input_file.on("change",b)}}}g.find("INPUT[type=file]").last().on("change",b)}}var f=c("#pybb_concerned_topics");if(f.length){c('#pybb_subscription_type input[type="radio"]').change(function(h){if(this.checked&&(this.value=="2"||this.value=="unsubscribe")){f.show()}else{f.hide()}});f.hide();c('input[name="type"][value="2"], input[name="type"][value="unsubscribe"]').each(function(h){if(this.checked){f.show()}})}});